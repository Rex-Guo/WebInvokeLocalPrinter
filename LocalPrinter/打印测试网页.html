<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title></title>
</head>
<body>
    <input id="content" type="text" value="测试内容" />
    <button id="btn">打印</button>
</body>
</html>
<script>
    var socket;
    var input = document.getElementById('content');
    var btn = document.getElementById('btn');
    var content = input.value;
    if ("WebSocket" in window) {
        var ws = new WebSocket("ws://localhost:2399");
        socket = ws;
    } else {
        alert("你的浏览器不支持socket请更换现代浏览器例如chrome！");
    }

    btn.onclick = function (btn, ev) {
        var printData = [
            {
                type: 'text',
                content: content
            },
            {
                type: 'finish'
            }
        ]
        socket.send(JSON.stringify(printData));
    }
</script>